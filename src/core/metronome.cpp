/* -----------------------------------------------------------------------------
 *
 * Giada - Your Hardcore Loopmachine
 *
 * -----------------------------------------------------------------------------
 *
 * Copyright (C) 2010-2018 Giovanni A. Zuliani | Monocasual
 *
 * This file is part of Giada - Your Hardcore Loopmachine.
 *
 * Giada - Your Hardcore Loopmachine is free software: you can
 * redistribute it and/or modify it under the terms of the GNU General
 * Public License as published by the Free Software Foundation, either
 * version 3 of the License, or (at your option) any later version.
 *
 * Giada - Your Hardcore Loopmachine is distributed in the hope that it
 * will be useful, but WITHOUT ANY WARRANTY; without even the implied
 * warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Giada - Your Hardcore Loopmachine. If not, see
 * <http://www.gnu.org/licenses/>.
 *
 * -------------------------------------------------------------------------- */

#include "../utils/log.h"
#include "audioBuffer.h"
#include "metronome.h"

namespace giada {
namespace m {
namespace metronome
{

    MetronomeWave defaultWave = MetronomeWave(0,38,
    {
      0.175860,  0.341914,  0.488904,  0.608633,  0.694426,  0.741500,
      0.747229,  0.711293,	0.635697,  0.524656,  0.384362,  0.222636,
      0.048496, -0.128348, -0.298035, -0.451105, -0.579021, -0.674653,
      -0.732667, -0.749830, -0.688924, -0.594091, -0.474481, -0.340160,
      -0.201360, -0.067752,  0.052194,  0.151746,  0.226280,  0.273493,
      0.293425,  0.288307,  0.262252,  0.220811,  0.170435,  0.117887,
      0.069639,  0.031320
    },
    {
      0.059033,  0.117240,  0.173807,  0.227943,  0.278890,  0.325936,
      0.368423,  0.405755,  0.437413,  0.462951,  0.482013,  0.494333,
      0.499738,  0.498153,  0.489598,  0.474195,  0.452159,  0.423798,
      0.389509,  0.349771,  0.289883,  0.230617,  0.173194,  0.118739,
      0.068260,  0.022631, -0.017423, -0.051339,	-0.078721, -0.099345,
      -0.113163, -0.120295, -0.121028, -0.115804, -0.105209, -0.089954,
      -0.070862, -0.048844
    });

    MetronomeWave tigerWave = MetronomeWave(1,928,
      {
          0.006017,  0.006457,  0.006709,  0.00674 ,  0.003597, -0.003208,
         -0.001789,  0.005167,  0.006354,  0.001945, -0.000517, -0.002252,
         -0.004833, -0.007089, -0.003287,  0.004232,  0.008759,  0.006551,
          0.002425,  0.007636,  0.009966,  0.000771, -0.007917, -0.006424,
          0.001741,  0.006772,  0.00543 , -0.007162, -0.062826, -0.166413,
         -0.264392, -0.311642, -0.349809, -0.416317, -0.469645, -0.423793,
         -0.257735, -0.041132,  0.152512,  0.294029,  0.409794,  0.524802,
          0.647861,  0.762959,  0.798812,  0.673422,  0.403106,  0.17768 ,
          0.108004,  0.112262,  0.09471 ,  0.022325, -0.053361, -0.10357 ,
         -0.105785, -0.165237, -0.348354, -0.560577, -0.663149, -0.525467,
         -0.284931, -0.139018, -0.08683 ,  0.011477,  0.178547,  0.274635,
          0.261628,  0.235192,  0.226946,  0.200761,  0.100084, -0.03863 ,
         -0.112888, -0.120256, -0.121744, -0.196294, -0.227142, -0.111008,
          0.027235,  0.064799,  0.113267,  0.235125,  0.233716,  0.092239,
          0.035589,  0.144659,  0.213076,  0.100345, -0.031714, -0.051456,
         -0.009967, -0.032196, -0.279556, -0.657199, -0.80825 , -0.664723,
         -0.514721, -0.480667, -0.381133, -0.2355  , -0.181061, -0.103789,
          0.003197,  0.055439,  0.144514,  0.337766,  0.413543,  0.324538,
          0.279221,  0.366086,  0.471139,  0.443268,  0.377145,  0.352257,
          0.297516,  0.136704, -0.003191,  0.01868 ,  0.098302,  0.107518,
          0.081477,  0.070278,  0.069895,  0.115262,  0.148089,  0.117006,
          0.061096, -0.006552, -0.068763, -0.044845,  0.121075,  0.278209,
          0.255707,  0.112955,  0.060642,  0.138265,  0.148508,  0.047347,
         -0.028062, -0.010463,  0.025739,  0.056329,  0.075331,  0.018153,
         -0.081368, -0.131026, -0.131901, -0.197885, -0.352571, -0.474739,
         -0.441542, -0.284658, -0.093256,  0.036657,  0.03431 ,  0.017514,
          0.075091,  0.108719,  0.009047, -0.150746, -0.23632 , -0.21828 ,
         -0.181121, -0.142612, -0.128366, -0.173702, -0.191088, -0.143913,
         -0.088163, -0.105268, -0.21725 , -0.360864, -0.419872, -0.353594,
         -0.239297, -0.142643, -0.043843,  0.074085,  0.195402,  0.267346,
          0.263661,  0.263881,  0.317041,  0.354484,  0.332844,  0.25378 ,
          0.135741,  0.042723, -0.002498, -0.037304, -0.064242, -0.027448,
          0.071529,  0.180649,  0.246387,  0.242367,  0.189804,  0.13211 ,
          0.121344,  0.148534,  0.17408 ,  0.212112,  0.250948,  0.257424,
          0.238884,  0.1895  ,  0.114832,  0.075757,  0.10686 ,  0.129026,
          0.055128, -0.050443, -0.089648, -0.157535, -0.276989, -0.36741 ,
         -0.372244, -0.262255, -0.107164,  0.067407,  0.191939,  0.200183,
          0.152528,  0.190882,  0.278887,  0.26109 ,  0.149141,  0.024074,
         -0.038817, -0.057828, -0.043605,  0.047895,  0.127394,  0.10345 ,
          0.029592, -0.027787, -0.077484, -0.183524, -0.360253, -0.481889,
         -0.494729, -0.460167, -0.355333, -0.239948, -0.164488, -0.055748,
          0.016184,  0.034739,  0.166815,  0.389789,  0.489965,  0.363326,
          0.13003 ,  0.003895,  0.005293,  0.036725,  0.041968, -0.022461,
         -0.116768, -0.144851, -0.085422, -0.018067, -0.030918, -0.105567,
         -0.136951, -0.062826,  0.043617,  0.110323,  0.131061,  0.088628,
          0.076914,  0.178114,  0.244139,  0.199235,  0.13681 ,  0.05891 ,
          0.022432,  0.011693, -0.096841, -0.183193, -0.147966, -0.072805,
         -0.038929, -0.095749, -0.228958, -0.325889, -0.29598 , -0.219717,
         -0.224133, -0.195444, -0.008452,  0.17996 ,  0.219235,  0.149331,
          0.041273,  0.030663,  0.196809,  0.301699,  0.157747,  0.000396,
          0.013203,  0.093588,  0.195356,  0.3261  ,  0.387049,  0.277349,
          0.10871 ,  0.058044,  0.123831,  0.148688,  0.100224,  0.119614,
          0.211764,  0.223619,  0.165504,  0.114272,  0.011844, -0.122732,
         -0.197466, -0.202504, -0.214689, -0.220491, -0.201888, -0.238275,
         -0.324434, -0.351373, -0.275175, -0.15617 , -0.085846, -0.077096,
         -0.03588 ,  0.056832,  0.129686,  0.192769,  0.283921,  0.354743,
          0.33491 ,  0.209644,  0.056722, -0.063431, -0.157212, -0.184717,
         -0.100126,  0.00944 , -0.009964, -0.088446, -0.114027, -0.149016,
         -0.179825, -0.107203, -0.000949, -0.019429, -0.129846, -0.190992,
         -0.167781, -0.160789, -0.187591, -0.162963, -0.040006,  0.094905,
          0.098525,  0.00328 , -0.062538, -0.028771,  0.014516, -0.00924 ,
         -0.04278 , -0.045683, -0.044087, -0.068177, -0.035517,  0.06343 ,
          0.078766,  0.054037,  0.173509,  0.30753 ,  0.28046 ,  0.196882,
          0.165715,  0.154815,  0.164919,  0.198065,  0.172227,  0.070774,
         -0.030957, -0.049247,  0.000001,  0.053211,  0.131239,  0.232816,
          0.252835,  0.180416,  0.134114,  0.102945,  0.023627, -0.016774,
          0.021417,  0.034504,  0.008337,  0.018965,  0.066973,  0.093579,
          0.101411,  0.092569,  0.054938,  0.006945, -0.020212, -0.027302,
         -0.019371,  0.010735,  0.026122,  0.012313, -0.007483, -0.03573 ,
         -0.096384, -0.12817 , -0.067853,  0.038832,  0.103131,  0.109932,
          0.101954,  0.074416,  0.039971,  0.046429,  0.06814 ,  0.051447,
         -0.014259, -0.104409, -0.133912, -0.065245,  0.007801,  0.027295,
          0.03559 ,  0.051635,  0.052825,  0.019787, -0.030451, -0.093995,
         -0.186759, -0.26731 , -0.251633, -0.153898, -0.095698, -0.084427,
         -0.068108, -0.075025, -0.103224, -0.092576, -0.052446, -0.02326 ,
         -0.021328, -0.040903, -0.063858, -0.065555, -0.044075, -0.050336,
         -0.085049, -0.094024, -0.063968,  0.000575,  0.091227,  0.160745,
          0.176356,  0.165508,  0.156182,  0.124719,  0.060677, -0.023923,
         -0.071209, -0.032032,  0.018123,  0.039474,  0.073467,  0.108146,
          0.143541,  0.170223,  0.17397 ,  0.147354,  0.095203,  0.045811,
         -0.01917 , -0.052063, -0.041512, -0.053602, -0.067614, -0.048998,
         -0.059016, -0.094786, -0.072167,  0.005768,  0.076275,  0.075512,
          0.04259 ,  0.017756, -0.013666, -0.012772,  0.014418,  0.001848,
         -0.046077, -0.066655, -0.00863 ,  0.077766,  0.075379,  0.010666,
         -0.02305 , -0.070809, -0.161301, -0.182321, -0.094122, -0.029049,
         -0.045487, -0.064739, -0.018872,  0.067975,  0.140796,  0.170201,
          0.180544,  0.187231,  0.164613,  0.132593,  0.097256,  0.070556,
          0.041232, -0.040697, -0.129793, -0.153925, -0.168924, -0.169546,
         -0.105721, -0.036127, -0.025394, -0.058324, -0.064884, -0.053803,
         -0.068246, -0.07042 , -0.05344 , -0.052872, -0.046222, -0.010884,
          0.043148,  0.082695,  0.116497,  0.179313,  0.22421 ,  0.198488,
          0.125264,  0.048531, -0.003797, -0.021325, -0.036809, -0.062726,
         -0.088194, -0.086536, -0.042696,  0.006995,  0.044859,  0.069756,
          0.089325,  0.127395,  0.175409,  0.193353,  0.162342,  0.11329 ,
          0.06639 ,  0.001825, -0.038879,  0.002724,  0.032988,  0.009045,
          0.035049,  0.07591 ,  0.027685, -0.052679, -0.071266, -0.070639,
         -0.092765, -0.129951, -0.150484, -0.123337, -0.067051,  0.011034,
          0.091702,  0.133561,  0.13212 ,  0.136843,  0.168734,  0.181036,
          0.142185,  0.08598 ,  0.041104,  0.010082, -0.019481, -0.055175,
         -0.079747, -0.096456, -0.109675, -0.091441, -0.037538,  0.003978,
         -0.000654, -0.003757,  0.023374,  0.013121, -0.052828, -0.086187,
         -0.049261, -0.006874,  0.000436,  0.003372,  0.040148,  0.074229,
          0.065362,  0.049883,  0.050512,  0.023452, -0.039791, -0.084791,
         -0.079599, -0.072533, -0.0977  , -0.10011 , -0.050716, -0.011306,
         -0.000866,  0.012593,  0.022894,  0.031477,  0.054692,  0.111359,
          0.170652,  0.161243,  0.09442 ,  0.052836,  0.045431,  0.045189,
          0.054437,  0.062373,  0.072978,  0.105223,  0.139174,  0.128498,
          0.07639 , -0.00288 , -0.098068, -0.150667, -0.12318 , -0.066777,
         -0.024383,  0.016772,  0.046376,  0.060386,  0.08252 ,  0.108065,
          0.112103,  0.086418,  0.040232,  0.001335, -0.017715, -0.037138,
         -0.060443, -0.070398, -0.078908, -0.078763, -0.042911, -0.005429,
         -0.017361, -0.048336, -0.042716, -0.008533,  0.033515,  0.0595  ,
          0.059111,  0.047652,  0.040759,  0.044064,  0.063958,  0.099145,
          0.120468,  0.109489,  0.094372,  0.108318,  0.130043,  0.126066,
          0.104455,  0.091561,  0.081335,  0.063208,  0.066825,  0.091715,
          0.092943,  0.06067 ,  0.036116,  0.051558,  0.067602,  0.03299 ,
         -0.033186, -0.083185, -0.089945, -0.048675, -0.015849, -0.021586,
         -0.032016, -0.030454, -0.047543, -0.081428, -0.088054, -0.07348 ,
         -0.053219, -0.036025, -0.042006, -0.092034, -0.153774, -0.177736,
         -0.164288, -0.128567, -0.081923, -0.037748,  0.004742,  0.067128,
          0.115193,  0.115809,  0.109295,  0.132192,  0.159142,  0.144015,
          0.092433,  0.039216, -0.000049, -0.011922,  0.012822,  0.037054,
          0.02795 ,  0.003127, -0.009562, -0.029548, -0.069625, -0.087955,
         -0.069448, -0.053695, -0.063628, -0.077672, -0.075924, -0.068548,
         -0.058306, -0.030548,  0.009227,  0.04974 ,  0.080865,  0.083297,
          0.059491,  0.024435, -0.015537, -0.03811 , -0.025214,  0.003249,
          0.00561 , -0.010325, -0.018024, -0.024619, -0.038082, -0.047329,
         -0.033977, -0.030613, -0.060535, -0.072152, -0.031096,  0.000636,
         -0.000103,  0.016564,  0.05007 ,  0.06852 ,  0.075725,  0.091172,
          0.106515,  0.121656,  0.146857,  0.165394,  0.160694,  0.123726,
          0.052358, -0.008503, -0.03123 , -0.04106 , -0.04923 , -0.036725,
         -0.013486, -0.011828, -0.022463, -0.013773,  0.024953,  0.0689  ,
          0.083631,  0.061417,  0.037362,  0.030571,  0.023742,  0.026556,
          0.034208,  0.02672 ,  0.036144,  0.063781,  0.076588,  0.05871 ,
          0.015104, -0.029738, -0.059292, -0.059687, -0.045584, -0.043581,
         -0.051531, -0.055625, -0.048147, -0.003087,  0.077537,  0.140367,
          0.159016,  0.153029,  0.132319,  0.085338,  0.024632, -0.011736,
         -0.013978, -0.006996, -0.00204 ,  0.005141,  0.001998, -0.012492,
         -0.01582 , -0.007514, -0.0083  , -0.004012,  0.01867 ,  0.039495,
          0.052583,  0.061714,  0.063026,  0.046179,  0.022452,  0.014437,
          0.027261,  0.043558,  0.042036,  0.026327,  0.020888,  0.030671,
          0.05265 ,  0.084645,  0.092981,  0.069679,  0.035106,  0.000201,
         -0.032748, -0.046819, -0.029218, -0.000768,  0.02163 ,  0.035604,
          0.041523,  0.035787,  0.013836, -0.005948, -0.013524, -0.02417 ,
         -0.031905, -0.026469, -0.022661, -0.024544, -0.006197,  0.043542,
          0.086905,  0.082577,  0.048108,  0.01482 , -0.018306, -0.039261,
         -0.047862, -0.059643, -0.069125, -0.062202, -0.045303, -0.034059,
         -0.031941, -0.039642, -0.053728, -0.064295, -0.054859, -0.024058,
          0.003303,  0.013312,  0.011823, -0.009301, -0.027755, -0.008924,
          0.026395,  0.036001,  0.012461, -0.006894,  0.00092 ,  0.019095,
          0.027794,  0.017551, -0.007064, -0.036799, -0.063693, -0.063716,
         -0.046006, -0.036974, -0.034095, -0.023856, -0.004003,  0.008011,
         -0.000443, -0.004785,  0.007483,  0.017415,  0.020358,  0.019816,
          0.004728, -0.019388, -0.028872, -0.033076, -0.040298, -0.036803,
         -0.020694, -0.008542, -0.005083,  0.006588
    },
    {   0.001977,  0.00097 , -0.001348, -0.001879, -0.004578, -0.010556,
       -0.036005, -0.100748, -0.189632, -0.251593, -0.284482, -0.332934,
       -0.399179, -0.421056, -0.348397, -0.19699 , -0.010904,  0.163849,
        0.291583,  0.362664,  0.417175,  0.491827,  0.560902,  0.512202,
        0.303119,  0.085706, -0.018866,  0.033551,  0.150863,  0.215812,
        0.207978,  0.18287 ,  0.184445,  0.167958,  0.130949, -0.012479,
       -0.225163, -0.34242 , -0.318464, -0.195833, -0.112749, -0.143344,
       -0.162096, -0.096493, -0.014446,  0.032732,  0.033287, -0.04766 ,
       -0.2006  , -0.276019, -0.276437, -0.23306 , -0.191351, -0.194802,
       -0.187243, -0.136334,  0.0392  ,  0.267293,  0.375135,  0.326819,
        0.270588,  0.278093,  0.269248,  0.27788 ,  0.218001,  0.117776,
        0.073284, -0.080667, -0.339181, -0.442998, -0.303688, -0.164012,
       -0.201235, -0.326813, -0.362221, -0.294511, -0.259574, -0.277828,
       -0.288015, -0.287903, -0.248916, -0.180653, -0.204208, -0.233203,
       -0.042014,  0.20324 ,  0.233969,  0.138554,  0.119891,  0.174662,
        0.180655,  0.12303 ,  0.073373,  0.024184,  0.010493,  0.120263,
        0.267797,  0.322133,  0.354259,  0.442875,  0.52841 ,  0.518232,
        0.41353 ,  0.319257,  0.263461,  0.178657,  0.036613, -0.090587,
       -0.121482, -0.086557, -0.077053, -0.084204, -0.05535 , -0.005847,
        0.021783,  0.064702,  0.125328,  0.157337,  0.122623,  0.0256  ,
       -0.06651 , -0.123768, -0.17721 , -0.278499, -0.38161 , -0.38982 ,
       -0.27171 , -0.161145, -0.186392, -0.228698, -0.131853,  0.002171,
        0.029539, -0.001009, -0.071422, -0.179424, -0.234204, -0.236126,
       -0.230194, -0.220523, -0.202134, -0.099049,  0.078245,  0.170588,
        0.104203,  0.001915,  0.006998,  0.065374,  0.010447, -0.161167,
       -0.331818, -0.437317, -0.430851, -0.33231 , -0.217554, -0.089769,
        0.062939,  0.221076,  0.333802,  0.331634,  0.220249,  0.101288,
        0.040377, -0.001753, -0.033028, -0.044489, -0.050084, -0.046624,
        0.000819,  0.057225,  0.130948,  0.249326,  0.287649,  0.23351 ,
        0.162588,  0.149225,  0.17294 ,  0.115784,  0.025914,  0.023126,
        0.090595,  0.16206 ,  0.228015,  0.233656,  0.141051,  0.02198 ,
       -0.029053,  0.015022,  0.054258,  0.017471, -0.009578,  0.053287,
        0.105194,  0.002365, -0.205598, -0.346022, -0.307224, -0.165796,
       -0.019244,  0.101068,  0.139329,  0.074515, -0.005489, -0.020362,
       -0.029063, -0.102545, -0.20386 , -0.219583, -0.129908, -0.003852,
        0.132757,  0.25948 ,  0.293905,  0.243422,  0.188864,  0.132149,
        0.036029, -0.160463, -0.368388, -0.414064, -0.328972, -0.235727,
       -0.166789, -0.107195, -0.055166, -0.043999, -0.044157,  0.018317,
        0.099111,  0.073943, -0.0142  , -0.034275, -0.017271, -0.053829,
       -0.142386, -0.194945, -0.160632, -0.095486, -0.062922, -0.051006,
       -0.04147 , -0.038751, -0.003099,  0.08899 ,  0.142674,  0.100691,
        0.007907, -0.056243, -0.045275, -0.021554, -0.036515, -0.054245,
       -0.045701, -0.028563,  0.003984,  0.061708,  0.121514,  0.153507,
        0.168107,  0.179745,  0.149018,  0.056903, -0.079651, -0.206834,
       -0.270066, -0.284894, -0.275125, -0.232509, -0.164979, -0.087184,
        0.012885,  0.086043,  0.063437,  0.021421,  0.037467,  0.086003,
        0.089388,  0.028142, -0.021907, -0.024004,  0.001752,  0.062814,
        0.142338,  0.12793 ,  0.071035,  0.101214,  0.158479,  0.139256,
        0.084017,  0.059303,  0.054011,  0.059105,  0.054692,  0.046723,
        0.03929 ,  0.008244,  0.034327,  0.178399,  0.306761,  0.332874,
        0.22424 ,  0.097209,  0.087262,  0.106078,  0.073256, -0.052612,
       -0.259886, -0.406253, -0.421465, -0.334866, -0.209978, -0.17899 ,
       -0.222389, -0.161637, -0.038627,  0.018409,  0.006561, -0.10205 ,
       -0.263267, -0.3503  , -0.31015 , -0.197672, -0.162116, -0.246796,
       -0.313841, -0.233069, -0.094287, -0.012345,  0.044244,  0.078702,
        0.060614,  0.091129,  0.144257,  0.13608 ,  0.172756,  0.254482,
        0.238289,  0.07986 , -0.00425 ,  0.07705 ,  0.166807,  0.205974,
        0.171065,  0.009882, -0.068412,  0.063706,  0.13732 , -0.009671,
       -0.1612  , -0.227046, -0.273266, -0.254357, -0.169805, -0.136946,
       -0.202334, -0.232506, -0.113871,  0.025575, -0.012039, -0.052972,
        0.044076,  0.107682,  0.066657,  0.048753,  0.083673,  0.136603,
        0.21246 ,  0.311041,  0.375728,  0.366259,  0.415063,  0.522878,
        0.503909,  0.374073,  0.289185,  0.214852,  0.12776 ,  0.117256,
        0.142669,  0.108218,  0.047818,  0.026171,  0.038274,  0.016726,
       -0.019613,  0.002578,  0.054376,  0.019524, -0.111549, -0.223386,
       -0.288354, -0.273452, -0.226565, -0.268734, -0.339252, -0.345689,
       -0.263822, -0.118938, -0.030939, -0.063136, -0.099311, -0.069962,
       -0.012848, -0.027649, -0.157778, -0.266741, -0.242094, -0.156297,
       -0.108959, -0.077338, -0.02592 ,  0.047859,  0.122391,  0.15623 ,
        0.138606,  0.091565,  0.032588,  0.014543,  0.027117, -0.015032,
       -0.091921, -0.13117 , -0.101546, -0.028235, -0.013888, -0.084931,
       -0.149618, -0.16829 , -0.155508, -0.112472, -0.108611, -0.195384,
       -0.261204, -0.201391, -0.079482,  0.015793,  0.088171,  0.144524,
        0.188814,  0.245131,  0.28413 ,  0.2578  ,  0.192204,  0.124491,
        0.042775,  0.001693,  0.027095,  0.03514 , -0.038089, -0.131598,
       -0.134519, -0.038756,  0.089328,  0.151846,  0.111045,  0.067727,
        0.097889,  0.168988,  0.212044,  0.159894,  0.042116, -0.052008,
       -0.077733, -0.065856, -0.079544, -0.125547, -0.124539, -0.050994,
        0.01342 ,  0.022368,  0.003001, -0.023491, -0.046902, -0.035923,
       -0.010592, -0.035726, -0.117082, -0.153471, -0.105234, -0.044532,
        0.007813,  0.045064,  0.01803 , -0.035825, -0.036722,  0.001868,
        0.002507, -0.053739, -0.097784, -0.096639, -0.075548, -0.054738,
       -0.039422, -0.056405, -0.100144, -0.119587, -0.094797, -0.057393,
       -0.031836, -0.029459, -0.058582, -0.104166, -0.122551, -0.098368,
       -0.069108, -0.038048,  0.032821,  0.105539,  0.113478,  0.100972,
        0.10944 ,  0.108025,  0.082123,  0.031634, -0.017495, -0.038666,
       -0.068917, -0.087799, -0.02149 ,  0.071521,  0.095168,  0.086126,
        0.102981,  0.118328,  0.106095,  0.094019,  0.083424,  0.059327,
        0.032363,  0.012565,  0.021861,  0.052036,  0.062793,  0.034509,
       -0.010426, -0.030814, -0.006711,  0.008949, -0.004852, -0.000861,
       -0.002671, -0.033998, -0.044469, -0.044856, -0.083753, -0.112286,
       -0.108645, -0.105076, -0.097208, -0.059581,  0.008711,  0.080153,
        0.135725,  0.14792 ,  0.100173,  0.049636,  0.054029,  0.084549,
        0.079625,  0.05469 ,  0.051609,  0.029673, -0.012281,  0.004634,
        0.058515,  0.061041,  0.018444, -0.021028, -0.040705, -0.045101,
       -0.04608 , -0.064762, -0.098465, -0.107431, -0.083942, -0.065146,
       -0.066845, -0.076991, -0.086274, -0.080326, -0.076873, -0.115944,
       -0.176465, -0.216731, -0.212945, -0.179431, -0.1673  , -0.153887,
       -0.085545, -0.006017,  0.012523, -0.011765, -0.019105, -0.012059,
       -0.000934,  0.027288,  0.062648,  0.081274,  0.065186,  0.035657,
        0.043183,  0.075623,  0.073219,  0.049542,  0.050913,  0.065467,
        0.064358,  0.048109,  0.032343,  0.041993,  0.088277,  0.135662,
        0.12532 ,  0.041627, -0.061098, -0.083978, -0.016684,  0.015398,
       -0.027425, -0.049211, -0.004738,  0.051095,  0.075853,  0.052307,
       -0.009998, -0.04416 , -0.032046, -0.006829,  0.034034,  0.070452,
        0.068921,  0.069964,  0.11325 ,  0.150511,  0.115877,  0.061319,
        0.051294,  0.04368 ,  0.025537, -0.001425, -0.04202 , -0.0538  ,
       -0.020583,  0.022832,  0.038961,  0.025028,  0.011847,  0.02861 ,
        0.052913,  0.0366  , -0.008218, -0.035189, -0.035242, -0.024832,
       -0.031274, -0.049431, -0.038142, -0.004953, -0.000211, -0.045866,
       -0.081543, -0.067341, -0.061631, -0.072841, -0.063548, -0.033703,
        0.002214,  0.036206,  0.068327,  0.08411 ,  0.080701,  0.087968,
        0.092935,  0.062117,  0.016447, -0.012213, -0.025319, -0.031901,
       -0.012867,  0.023672,  0.025074, -0.01581 , -0.057456, -0.086155,
       -0.100426, -0.100367, -0.09937 , -0.095982, -0.06642 , -0.010571,
        0.021909,  0.025353,  0.022436, -0.006835, -0.064838, -0.096187,
       -0.067093, -0.021997, -0.008336, -0.002507,  0.016753,  0.010623,
       -0.018979, -0.032142, -0.020405, -0.00996 , -0.026492, -0.048383,
       -0.049864, -0.037794, -0.016224,  0.011267,  0.049196,  0.097056,
        0.122864,  0.11727 ,  0.093106,  0.064414,  0.038356,  0.017003,
        0.00052 , -0.034764, -0.07106 , -0.07011 , -0.043549, -0.016532,
       -0.02156 , -0.053334, -0.061223, -0.052412, -0.062916, -0.078402,
       -0.083687, -0.077673, -0.061094, -0.035143,  0.004285,  0.042468,
        0.053186,  0.036172,  0.018449, -0.015055, -0.071798, -0.094888,
       -0.076965, -0.05984 , -0.033341,  0.015971,  0.064336,  0.093971,
        0.101911,  0.10802 ,  0.107   ,  0.079205,  0.049233,  0.053988,
        0.082645,  0.08866 ,  0.0782  ,  0.083763,  0.074602,  0.040899,
        0.02866 ,  0.033598,  0.02141 ,  0.004411,  0.000573,  0.018834,
        0.063597,  0.097269,  0.077398,  0.028338, -0.006649, -0.021692,
       -0.027568, -0.03626 , -0.053805, -0.08369 , -0.10658 , -0.081597,
       -0.019082,  0.038707,  0.068786,  0.055123,  0.018795,  0.01255 ,
        0.035249,  0.038092,  0.014718, -0.009489, -0.017907,  0.003291,
        0.050933,  0.096647,  0.1181  ,  0.107728,  0.0805  ,  0.076377,
        0.078404,  0.044381,  0.00533 , -0.015548, -0.031012, -0.03104 ,
       -0.011008,  0.015302,  0.038536,  0.06179 ,  0.077506,  0.070915,
        0.033761, -0.010722, -0.014333,  0.021545,  0.049698,  0.047626,
        0.025345,  0.011487,  0.032836,  0.065339,  0.058317,  0.020488,
       -0.020244, -0.047308, -0.033986,  0.010273,  0.036818,  0.030833,
        0.008191, -0.014234, -0.017913, -0.01375 , -0.023262, -0.037176,
       -0.037892, -0.02616 , -0.009977,  0.008548,  0.03243 ,  0.050539,
        0.045607,  0.009094, -0.047407, -0.069241, -0.043474, -0.02354 ,
       -0.03144 , -0.036388, -0.016615,  0.008905,  0.03527 ,  0.056734,
        0.048759,  0.006465, -0.038895, -0.056933, -0.061215, -0.083914,
       -0.11504 , -0.114535, -0.089951, -0.065208, -0.042423, -0.034456,
       -0.04111 , -0.035497, -0.028959, -0.056987, -0.093114, -0.090641,
       -0.054447, -0.023394, -0.02774 , -0.049618, -0.05944 , -0.041678,
        0.001644,  0.041183,  0.048913,  0.027434,  0.008662, -0.006237,
       -0.03115 , -0.038573, -0.011734,  0.028551,  0.052511,  0.054762,
        0.043701,  0.01901 , -0.002429,  0.008663,  0.029348,  0.022834,
       -0.003494, -0.013951,  0.004957,  0.022304,  0.012244, -0.018925,
       -0.03859 , -0.026034, -0.008186, -0.007622, -0.015908, -0.019858,
        0.010187,  0.058807,  0.085326,  0.095109,  0.097373,  0.090728,
        0.077465,  0.058393,  0.031933, -0.010855, -0.044335, -0.044348,
       -0.03316 , -0.021549, -0.010382, -0.002548,  0.011161,  0.034105,
        0.050381,  0.048409,  0.028974,  0.008405
    });

   bool   on = false;
   float  vol = 1;
   MetronomeWave wave = tigerWave;
   int    output = 0;
   bool   mono = false;
   int    tickTracker, tockTracker = 0;
   bool   tickPlay, tockPlay = false;

   void render(AudioBuffer& outBuf, unsigned frame)
   {
     //gu_log("tick:%x, tock:%x\n", tickPlay, tockPlay);
   	if (tockPlay) {
   		for (int i=output; i<output+(mono?1:2) && i<outBuf.countChannels(); i++)
   			outBuf[frame][i] += wave.tock[tockTracker] * vol;
   		tockTracker++;
   		if (tockTracker >= wave.size-1) {
   			tockPlay    = false;
   			tockTracker = 0;
   		}
   	}
   	if (tickPlay) {
   		for (int i=output; i<output+(mono?1:2) && i<outBuf.countChannels(); i++)
   			outBuf[frame][i] += wave.tick[tickTracker] * vol;
   		tickTracker++;
   		if (tickTracker >= wave.size-1) {
   			tickPlay    = false;
   			tickTracker = 0;
   		}
   	}
   }

}}}; // giada::m::metronome::
